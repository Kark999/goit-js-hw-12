{"version":3,"file":"commonHelpers.js","sources":["../src/img/octagon.svg","../src/img/close.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__de411352__\"","export default \"__VITE_ASSET__aaabd9ba__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport errorIcon from '../src/img/octagon.svg';\nimport closeIcon from '../src/img/close.svg';\nimport axios from 'axios';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  searchMore: document.querySelector('.search-more'),\n};\nlet gallery = new SimpleLightbox('.gallery a');\n\nlet query = null;\nlet page = null;\nconst per_page = 15;\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.searchMore.addEventListener('click', onGetImageByPage);\n\nasync function onGetImageByPage(e) {\n  e.preventDefault();\n  page += 1;\n\n  refs.loader.classList.remove('hidden');\n  try {\n    const data = await getImagesByType();\n    if (data.totalHits === 0) {\n      return showError(message);\n    }\n    const markup = galleryTemplate(data.hits);\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n    gallery.refresh();\n    checkBtnStatus(data);\n  } catch (error) {\n    showError(error);\n  }\n  refs.loader.classList.add('hidden');\n  smoothScroll();\n}\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  query = e.target.elements.search.value.trim();\n  page = 1;\n\n  refs.loader.classList.remove('hidden');\n  refs.gallery.innerHTML = '';\n  try {\n    const data = await getImagesByType();\n    if (data.totalHits === 0) {\n      return showError(\n        'Sorry, there are no images matching <br/> your search query. Please try again!'\n      );\n    }\n    const markup = galleryTemplate(data.hits);\n    refs.gallery.innerHTML = markup;\n    gallery.refresh();\n    checkBtnStatus(data);\n  } catch (error) {\n    showError(error);\n  }\n  refs.loader.classList.add('hidden');\n  refs.form.reset();\n}\n\nasync function getImagesByType() {\n  const url = 'https://pixabay.com/api/';\n  const response = await axios.get(url, {\n    params: {\n      key: '42141224-180b0a56c10fd436e302d680a',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: per_page,\n    },\n  });\n  return response.data;\n}\n\nfunction imageTemplate(data) {\n  return `<li class=\"gallery-card\">\n        <a href=\"${data.largeImageURL}\"\n          ><img\n            class=\"gallery-image\"\n            src=\"${data.webformatURL}\"\n            alt=\"${data.tags}\"\n            title=\"\"\n          />\n        </a>\n        <div class=\"gallery-card-items\">\n          <p class=\"gallery-card-info\">\n            Likes\n            <span class=\"gallery-card-data\">${data.likes}</span>\n          </p>\n\n          <p class=\"gallery-card-info\">\n            Views\n            <span class=\"gallery-card-data\">${data.views}</span>\n          </p>\n\n          <p class=\"gallery-card-info\">\n            Comments\n            <span class=\"gallery-card-data\">${data.comments}</span>\n          </p>\n\n          <p class=\"gallery-card-info\">\n            Downloads\n            <span class=\"gallery-card-data\">${data.downloads}</span>\n          </p>\n        </div>\n      </li>`;\n}\nfunction galleryTemplate(data) {\n  return data.map(imageTemplate).join('');\n}\n\nfunction showError(message) {\n  iziToast.error({\n    message,\n\n    position: 'topRight',\n    messageColor: '#ffffff',\n    messageSize: '16px',\n    backgroundColor: '#ef4040',\n    iconColor: '#ffffff',\n    iconUrl: errorIcon,\n    timeout: 5000,\n    close: false,\n    closeOnEscape: true,\n    buttons: [\n      [\n        `<button type=\"button\" style=\"background-color: transparent\" ><img src=${closeIcon}></button>`,\n        function (instance, toast) {\n          instance.hide({ transitionOut: 'fadeOut' }, toast);\n        },\n      ],\n    ],\n  });\n}\nfunction checkBtnStatus(data) {\n  const maxPage = Math.ceil(data.totalHits / per_page);\n  const isLastPage = maxPage === page;\n  if (isLastPage) {\n    refs.searchMore.classList.add('hidden');\n    showError(\"We're sorry, but you've reached the end of search results.\");\n  } else {\n    refs.searchMore.classList.remove('hidden');\n  }\n}\nfunction smoothScroll() {\n  const card = refs.gallery.firstElementChild;\n  const cardSize = card.getBoundingClientRect();\n  scrollBy({\n    behavior: 'smooth',\n    top: cardSize.height * 2,\n  });\n  console.log(cardSize);\n}\n"],"names":["errorIcon","closeIcon","refs","gallery","SimpleLightbox","query","page","per_page","onFormSubmit","onGetImageByPage","data","getImagesByType","showError","markup","galleryTemplate","checkBtnStatus","error","smoothScroll","url","axios","imageTemplate","message","iziToast","instance","toast","cardSize"],"mappings":"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"}